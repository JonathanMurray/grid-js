<html>
<head>
    <style>
        canvas {
            outline: none
        }
        canvas.focused {
            outline:  dashed purple 2px;
        }
    </style>
</head>
<body>
    <div>
        <canvas id="terminal-canvas" tabindex="0" width="500" height="200" style="border:1px solid #000000"></canvas>
    </div>
</body>

<script src="grid.js"></script>
<script src="text-grid.js"></script>
<script src="terminal.js"></script>
<script src="system.js"></script>

<script>

window.addEventListener("keydown", function(event) {
    if (event.code == "Tab") {
        event.preventDefault();
    }

    if (event.key == "s" && event.ctrlKey) {
        event.preventDefault();
    }
});

const canvas = document.getElementById("terminal-canvas");
canvas.classList.add("focused");
canvas.focus();

System.init(canvas).then((system) => {
    console.log("System initialised. Setting up window event listeners...");
    window.addEventListener("keydown", function(event) {
        system.handleEvent("keydown", event);
    });

    window.addEventListener("mousemove", (event) => {
        system.handleEvent("mousemove", event);
    });

    window.addEventListener("mouseup", (event) => {
        system.handleEvent("mouseup", event);
    });

    window.addEventListener("message", event => {
        system.handleEvent("message", event);
    });
});



</script>

</html>
